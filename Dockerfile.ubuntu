FROM ubuntu:18.04

COPY . /cicd-s2e-runner

ENV HELPER_SCRIPTS=/cicd-s2e-runner/os/ubuntu/scripts/helpers
ENV INSTALL_SCRIPTS=/cicd-s2e-runner/os/ubuntu/scripts/installers

RUN ln -sf /bin/echo /usr/local/bin/systemctl \
 && bash /cicd-s2e-runner/os/ubuntu/scripts/base/apt.sh \
 && bash /cicd-s2e-runner/os/ubuntu/scripts/base/limits.sh \
 && bash /cicd-s2e-runner/os/ubuntu/scripts/base/repos.sh

RUN bash ${INSTALL_SCRIPTS}/aliyun-cli.sh
